ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motor.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/motor.c"
  20              		.section	.text.Motor_ClockInit,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	Motor_ClockInit:
  27              	.LFB130:
   1:Core/Src/motor.c **** #include "motor.h"
   2:Core/Src/motor.c **** // motor.c
   3:Core/Src/motor.c **** 
   4:Core/Src/motor.c **** /* --- –õ–û–ö–ê–õ–¨–ù–´–ï –ü–†–û–¢–û–¢–ò–ü–´ --- */
   5:Core/Src/motor.c **** 
   6:Core/Src/motor.c **** static void Motor_ClockInit(void);
   7:Core/Src/motor.c **** static void Motor_GPIO_DirPins_Init(void);
   8:Core/Src/motor.c **** static void Motor_GPIO_PwmPins_Init(void);
   9:Core/Src/motor.c **** static void Motor_TIM1_Init(void);
  10:Core/Src/motor.c **** 
  11:Core/Src/motor.c **** static void Motor_SetDir(MotorId id, int8_t dir);
  12:Core/Src/motor.c **** static void Motor_SetPwm(MotorId id, uint16_t value);
  13:Core/Src/motor.c **** 
  14:Core/Src/motor.c **** // –í–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ—Ä—Ç–æ–≤ –º–æ—Ç–æ—Ä–∞ –∏ —Ç–∞–π–º–µ—Ä–æ–≤
  15:Core/Src/motor.c **** static void Motor_ClockInit(void)
  16:Core/Src/motor.c **** {
  28              		.loc 1 16 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  17:Core/Src/motor.c ****     SET_BIT(RCC->AHB1ENR, RCC_AHB1ENR_GPIODEN);
  33              		.loc 1 17 5 view .LVU1
  34 0000 064B     		ldr	r3, .L2
  35 0002 1A6B     		ldr	r2, [r3, #48]
  36 0004 42F00802 		orr	r2, r2, #8
  37 0008 1A63     		str	r2, [r3, #48]
  18:Core/Src/motor.c ****     SET_BIT(RCC->AHB1ENR, RCC_AHB1ENR_GPIOEEN);
  38              		.loc 1 18 5 view .LVU2
  39 000a 1A6B     		ldr	r2, [r3, #48]
  40 000c 42F01002 		orr	r2, r2, #16
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 2


  41 0010 1A63     		str	r2, [r3, #48]
  19:Core/Src/motor.c **** 
  20:Core/Src/motor.c ****     // –í–∫–ª—é—á–∞–µ–º —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TIM1 (—à–∏–Ω–∞ APB2)
  21:Core/Src/motor.c ****     SET_BIT(RCC->APB2ENR, RCC_APB2ENR_TIM1EN);
  42              		.loc 1 21 5 view .LVU3
  43 0012 5A6C     		ldr	r2, [r3, #68]
  44 0014 42F00102 		orr	r2, r2, #1
  45 0018 5A64     		str	r2, [r3, #68]
  22:Core/Src/motor.c **** }
  46              		.loc 1 22 1 is_stmt 0 view .LVU4
  47 001a 7047     		bx	lr
  48              	.L3:
  49              		.align	2
  50              	.L2:
  51 001c 00380240 		.word	1073887232
  52              		.cfi_endproc
  53              	.LFE130:
  55              		.section	.text.Motor_GPIO_DirPins_Init,"ax",%progbits
  56              		.align	1
  57              		.syntax unified
  58              		.thumb
  59              		.thumb_func
  61              	Motor_GPIO_DirPins_Init:
  62              	.LFB131:
  23:Core/Src/motor.c **** 
  24:Core/Src/motor.c **** // IN1..IN4: PD11‚ÄìPD14 –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –≤—ã—Ö–æ–¥—ã
  25:Core/Src/motor.c **** static void Motor_GPIO_DirPins_Init(void)
  26:Core/Src/motor.c **** {
  63              		.loc 1 26 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  27:Core/Src/motor.c ****     /* --- 0. –í–∫–ª—é—á–∞–µ–º —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞ D --- */
  28:Core/Src/motor.c ****     SET_BIT(RCC->AHB1ENR, RCC_AHB1ENR_GPIODEN);
  68              		.loc 1 28 5 view .LVU6
  69 0000 0E4A     		ldr	r2, .L5
  70 0002 136B     		ldr	r3, [r2, #48]
  71 0004 43F00803 		orr	r3, r3, #8
  72 0008 1363     		str	r3, [r2, #48]
  29:Core/Src/motor.c **** 
  30:Core/Src/motor.c ****     /* --- 1. MODER: PD11‚ÄìPD14 = Output (01b) --- */
  31:Core/Src/motor.c ****     MODIFY_REG(GPIOD->MODER,
  73              		.loc 1 31 5 view .LVU7
  74 000a 0D4B     		ldr	r3, .L5+4
  75 000c 1A68     		ldr	r2, [r3]
  76 000e 22F07F52 		bic	r2, r2, #1069547520
  77 0012 42F0AA52 		orr	r2, r2, #356515840
  78 0016 1A60     		str	r2, [r3]
  32:Core/Src/motor.c ****                GPIO_MODER_MODER11_Msk |
  33:Core/Src/motor.c ****                    GPIO_MODER_MODER12_Msk |
  34:Core/Src/motor.c ****                    GPIO_MODER_MODER13_Msk |
  35:Core/Src/motor.c ****                    GPIO_MODER_MODER14_Msk,
  36:Core/Src/motor.c ****                (0x1UL << GPIO_MODER_MODER11_Pos) |
  37:Core/Src/motor.c ****                    (0x1UL << GPIO_MODER_MODER12_Pos) |
  38:Core/Src/motor.c ****                    (0x1UL << GPIO_MODER_MODER13_Pos) |
  39:Core/Src/motor.c ****                    (0x1UL << GPIO_MODER_MODER14_Pos));
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 3


  40:Core/Src/motor.c ****     /* 01b = General purpose output mode */
  41:Core/Src/motor.c **** 
  42:Core/Src/motor.c ****     /* --- 2. OTYPER: Push-pull (0) --- */
  43:Core/Src/motor.c ****     CLEAR_BIT(GPIOD->OTYPER,
  79              		.loc 1 43 5 view .LVU8
  80 0018 5A68     		ldr	r2, [r3, #4]
  81 001a 22F4F042 		bic	r2, r2, #30720
  82 001e 5A60     		str	r2, [r3, #4]
  44:Core/Src/motor.c ****               GPIO_OTYPER_OT_11 |
  45:Core/Src/motor.c ****                   GPIO_OTYPER_OT_12 |
  46:Core/Src/motor.c ****                   GPIO_OTYPER_OT_13 |
  47:Core/Src/motor.c ****                   GPIO_OTYPER_OT_14);
  48:Core/Src/motor.c **** 
  49:Core/Src/motor.c ****     /* --- 3. OSPEEDR: High speed (11b) --- */
  50:Core/Src/motor.c ****     MODIFY_REG(GPIOD->OSPEEDR,
  83              		.loc 1 50 5 view .LVU9
  84 0020 9A68     		ldr	r2, [r3, #8]
  85 0022 42F07F52 		orr	r2, r2, #1069547520
  86 0026 9A60     		str	r2, [r3, #8]
  51:Core/Src/motor.c ****                GPIO_OSPEEDR_OSPEED11_Msk |
  52:Core/Src/motor.c ****                    GPIO_OSPEEDR_OSPEED12_Msk |
  53:Core/Src/motor.c ****                    GPIO_OSPEEDR_OSPEED13_Msk |
  54:Core/Src/motor.c ****                    GPIO_OSPEEDR_OSPEED14_Msk,
  55:Core/Src/motor.c ****                (0x3UL << GPIO_OSPEEDR_OSPEED11_Pos) |
  56:Core/Src/motor.c ****                    (0x3UL << GPIO_OSPEEDR_OSPEED12_Pos) |
  57:Core/Src/motor.c ****                    (0x3UL << GPIO_OSPEEDR_OSPEED13_Pos) |
  58:Core/Src/motor.c ****                    (0x3UL << GPIO_OSPEEDR_OSPEED14_Pos));
  59:Core/Src/motor.c **** 
  60:Core/Src/motor.c ****     /* --- 4. PUPDR: No pull-up / pull-down (00b) --- */
  61:Core/Src/motor.c ****     MODIFY_REG(GPIOD->PUPDR,
  87              		.loc 1 61 5 view .LVU10
  88 0028 DA68     		ldr	r2, [r3, #12]
  89 002a 22F07F52 		bic	r2, r2, #1069547520
  90 002e DA60     		str	r2, [r3, #12]
  62:Core/Src/motor.c ****                GPIO_PUPDR_PUPD11_Msk |
  63:Core/Src/motor.c ****                    GPIO_PUPDR_PUPD12_Msk |
  64:Core/Src/motor.c ****                    GPIO_PUPDR_PUPD13_Msk |
  65:Core/Src/motor.c ****                    GPIO_PUPDR_PUPD14_Msk,
  66:Core/Src/motor.c ****                0U);
  67:Core/Src/motor.c **** 
  68:Core/Src/motor.c ****     /* --- 5. –ù–∞ —Å—Ç–∞—Ä—Ç–µ: –≤—Å–µ INx = 0 (—Ç–æ—Ä–º–æ–∑) --- */
  69:Core/Src/motor.c ****     /* BSRR: BRx (–≤–µ—Ä—Ö–Ω–∏–µ 16 –±–∏—Ç) ‚Äî —Å–±—Ä–æ—Å –ø–∏–Ω–∞ */
  70:Core/Src/motor.c ****     SET_BIT(GPIOD->BSRR,
  91              		.loc 1 70 5 view .LVU11
  92 0030 9A69     		ldr	r2, [r3, #24]
  93 0032 42F0F042 		orr	r2, r2, #2013265920
  94 0036 9A61     		str	r2, [r3, #24]
  71:Core/Src/motor.c ****             GPIO_BSRR_BR_11 |
  72:Core/Src/motor.c ****                 GPIO_BSRR_BR_12 |
  73:Core/Src/motor.c ****                 GPIO_BSRR_BR_13 |
  74:Core/Src/motor.c ****                 GPIO_BSRR_BR_14);
  75:Core/Src/motor.c **** }
  95              		.loc 1 75 1 is_stmt 0 view .LVU12
  96 0038 7047     		bx	lr
  97              	.L6:
  98 003a 00BF     		.align	2
  99              	.L5:
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 4


 100 003c 00380240 		.word	1073887232
 101 0040 000C0240 		.word	1073875968
 102              		.cfi_endproc
 103              	.LFE131:
 105              		.section	.text.Motor_GPIO_PwmPins_Init,"ax",%progbits
 106              		.align	1
 107              		.syntax unified
 108              		.thumb
 109              		.thumb_func
 111              	Motor_GPIO_PwmPins_Init:
 112              	.LFB132:
  76:Core/Src/motor.c **** 
  77:Core/Src/motor.c **** // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PE9, PE11 –Ω–∞ TIM1_CH1, TIM1_CH2 (—Ä–µ–∂–∏–º MODER –∫–∞–∫ 10, alt.func.)
  78:Core/Src/motor.c **** static void Motor_GPIO_PwmPins_Init(void)
  79:Core/Src/motor.c **** {
 113              		.loc 1 79 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
 117              		@ link register save eliminated.
  80:Core/Src/motor.c ****     /* --- 0. –í–∫–ª—é—á–∞–µ–º —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞ E --- */
  81:Core/Src/motor.c ****     SET_BIT(RCC->AHB1ENR, RCC_AHB1ENR_GPIOEEN);
 118              		.loc 1 81 5 view .LVU14
 119 0000 114A     		ldr	r2, .L8
 120 0002 136B     		ldr	r3, [r2, #48]
 121 0004 43F01003 		orr	r3, r3, #16
 122 0008 1363     		str	r3, [r2, #48]
  82:Core/Src/motor.c **** 
  83:Core/Src/motor.c ****     /* --- 1. MODER: Alternate function (10b) --- */
  84:Core/Src/motor.c ****     MODIFY_REG(GPIOE->MODER,
 123              		.loc 1 84 5 view .LVU15
 124 000a 104B     		ldr	r3, .L8+4
 125 000c 1A68     		ldr	r2, [r3]
 126 000e 22F44C02 		bic	r2, r2, #13369344
 127 0012 42F40802 		orr	r2, r2, #8912896
 128 0016 1A60     		str	r2, [r3]
  85:Core/Src/motor.c ****                GPIO_MODER_MODER9_Msk | GPIO_MODER_MODER11_Msk,
  86:Core/Src/motor.c ****                (0x2UL << GPIO_MODER_MODER9_Pos) |
  87:Core/Src/motor.c ****                    (0x2UL << GPIO_MODER_MODER11_Pos));
  88:Core/Src/motor.c **** 
  89:Core/Src/motor.c ****     /* --- 2. OTYPER: Push-pull (0) --- */
  90:Core/Src/motor.c ****     CLEAR_BIT(GPIOE->OTYPER, GPIO_OTYPER_OT_9 | GPIO_OTYPER_OT_11);
 129              		.loc 1 90 5 view .LVU16
 130 0018 5A68     		ldr	r2, [r3, #4]
 131 001a 22F42062 		bic	r2, r2, #2560
 132 001e 5A60     		str	r2, [r3, #4]
  91:Core/Src/motor.c **** 
  92:Core/Src/motor.c ****     /* --- 3. OSPEEDR: High speed (11b) --- */
  93:Core/Src/motor.c ****     MODIFY_REG(GPIOE->OSPEEDR,
 133              		.loc 1 93 5 view .LVU17
 134 0020 9A68     		ldr	r2, [r3, #8]
 135 0022 42F44C02 		orr	r2, r2, #13369344
 136 0026 9A60     		str	r2, [r3, #8]
  94:Core/Src/motor.c ****                GPIO_OSPEEDR_OSPEED9_Msk | GPIO_OSPEEDR_OSPEED11_Msk,
  95:Core/Src/motor.c ****                (0x3UL << GPIO_OSPEEDR_OSPEED9_Pos) |
  96:Core/Src/motor.c ****                    (0x3UL << GPIO_OSPEEDR_OSPEED11_Pos));
  97:Core/Src/motor.c **** 
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 5


  98:Core/Src/motor.c ****     /* --- 4. PUPDR: No pull-up / pull-down (00b) --- */
  99:Core/Src/motor.c ****     MODIFY_REG(GPIOE->PUPDR,
 137              		.loc 1 99 5 view .LVU18
 138 0028 DA68     		ldr	r2, [r3, #12]
 139 002a 22F44C02 		bic	r2, r2, #13369344
 140 002e DA60     		str	r2, [r3, #12]
 100:Core/Src/motor.c ****                GPIO_PUPDR_PUPD9_Msk | GPIO_PUPDR_PUPD11_Msk,
 101:Core/Src/motor.c ****                0U);
 102:Core/Src/motor.c **** 
 103:Core/Src/motor.c ****     /* --- 5. AFR[1]: Alternate function AF1 (TIM1) --- */
 104:Core/Src/motor.c ****     MODIFY_REG(GPIOE->AFR[1],
 141              		.loc 1 104 5 view .LVU19
 142 0030 5A6A     		ldr	r2, [r3, #36]
 143 0032 22F47042 		bic	r2, r2, #61440
 144 0036 22F0F002 		bic	r2, r2, #240
 145 003a 42F48052 		orr	r2, r2, #4096
 146 003e 42F01002 		orr	r2, r2, #16
 147 0042 5A62     		str	r2, [r3, #36]
 105:Core/Src/motor.c ****                GPIO_AFRH_AFSEL9_Msk | GPIO_AFRH_AFSEL11_Msk,
 106:Core/Src/motor.c ****                (0x1UL << GPIO_AFRH_AFSEL9_Pos) |
 107:Core/Src/motor.c ****                    (0x1UL << GPIO_AFRH_AFSEL11_Pos));
 108:Core/Src/motor.c **** }
 148              		.loc 1 108 1 is_stmt 0 view .LVU20
 149 0044 7047     		bx	lr
 150              	.L9:
 151 0046 00BF     		.align	2
 152              	.L8:
 153 0048 00380240 		.word	1073887232
 154 004c 00100240 		.word	1073876992
 155              		.cfi_endproc
 156              	.LFE132:
 158              		.section	.text.Motor_TIM1_Init,"ax",%progbits
 159              		.align	1
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 164              	Motor_TIM1_Init:
 165              	.LFB133:
 109:Core/Src/motor.c **** 
 110:Core/Src/motor.c **** /*
 111:Core/Src/motor.c ****  * –ü–ê–†–ê–ú–ï–¢–†–´ –®–ò–ú:
 112:Core/Src/motor.c ****  *
 113:Core/Src/motor.c ****  * f_TIM1  ‚Äî —á–∞—Å—Ç–æ—Ç–∞ —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ TIM1 (–ø–æ—Å–ª–µ APB2 –∏ —É–º
 114:Core/Src/motor.c ****  * –í —É—á–µ–±–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º:
 115:Core/Src/motor.c ****  *     f_TIM1 = 168 –ú–ì—Ü  (—ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RCC! —Å–º. SystemClock)
 116:Core/Src/motor.c ****  *
 117:Core/Src/motor.c ****  * –•–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É PWM:
 118:Core/Src/motor.c ****  *     f_PWM = 20 –∫–ì—Ü
 119:Core/Src/motor.c ****  *
 120:Core/Src/motor.c ****  * –§–æ—Ä–º—É–ª–∞:
 121:Core/Src/motor.c ****  *   f_PWM = f_TIM1 / ((PSC + 1) * (ARR + 1))
 122:Core/Src/motor.c ****  *
 123:Core/Src/motor.c ****  * –û—Ç—Å—é–¥–∞:
 124:Core/Src/motor.c ****  *   (PSC + 1) * (ARR + 1) = f_TIM1 / f_PWM
 125:Core/Src/motor.c ****  *   (PSC + 1) * (ARR + 1) = 168 000 000 / 20 000 = 8400
 126:Core/Src/motor.c ****  *
 127:Core/Src/motor.c ****  * –í—ã–±–∏—Ä–∞–µ–º —É–¥–æ–±–Ω—É—é –ø–∞—Ä—É:
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 6


 128:Core/Src/motor.c ****  *   PSC + 1 = 42  => PSC = 83
 129:Core/Src/motor.c ****  *   ARR + 1 = 100 => ARR = 99
 130:Core/Src/motor.c ****  *
 131:Core/Src/motor.c ****  * –¢–æ–≥–¥–∞:
 132:Core/Src/motor.c ****  *   f_PWM = 168 000 000 / (84 * 100) = 20 000 –ì—Ü (20 –∫–ì—Ü)
 133:Core/Src/motor.c ****  */
 134:Core/Src/motor.c **** 
 135:Core/Src/motor.c **** /*
 136:Core/Src/motor.c ****  * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TIM1 –≤ —Ä–µ–∂–∏–º PWM:
 137:Core/Src/motor.c ****  *
 138:Core/Src/motor.c ****  * 1) –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä (CR1.CEN = 0).
 139:Core/Src/motor.c ****  * 2) –ó–∞–¥–∞—ë–º PSC –∏ ARR –ø–æ–¥ –Ω—É–∂–Ω—É—é —á–∞—Å—Ç–æ—Ç—É (20 –∫–ì—Ü).
 140:Core/Src/motor.c ****  * 3) –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–∞–Ω–∞–ª 1 –∏ 2:
 141:Core/Src/motor.c ****  *      - CCxS = 00 (–∫–∞–Ω–∞–ª –∫–∞–∫ –≤—ã—Ö–æ–¥)
 142:Core/Src/motor.c ****  *      - OCxM = 110 (PWM mode 1)
 143:Core/Src/motor.c ****  *      - OCxPE = 1 (–ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ CCRx –≤–∫–ª—é—á–µ–Ω–∞)
 144:Core/Src/motor.c ****  * 4) –†–∞–∑—Ä–µ—à–∞–µ–º –≤—ã—Ö–æ–¥—ã –∫–∞–Ω–∞–ª–æ–≤ –≤ CCER (CC1E, CC2E).
 145:Core/Src/motor.c ****  * 5) –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å (CCR1/CCR2 = 0).
 146:Core/Src/motor.c ****  * 6) –í–∫–ª—é—á–∞–µ–º ARPE (CR1.ARPE = 1), —á—Ç–æ–±—ã ARR —Ç–æ–∂–µ –±—ã–ª –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞
 147:Core/Src/motor.c ****  * 7) –í–∫–ª—é—á–∞–µ–º BDTR.MOE ‚Äî –≥–ª–∞–≤–Ω—ã–π –≤—ã—Ö–æ–¥ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è TIM1).
 148:Core/Src/motor.c ****  * 8) –î–µ–ª–∞–µ–º EGR.UG, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
 149:Core/Src/motor.c ****  * 9) –í–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–µ—Ä (CR1.CEN = 1).
 150:Core/Src/motor.c ****  */
 151:Core/Src/motor.c **** static void Motor_TIM1_Init(void)
 152:Core/Src/motor.c **** {
 166              		.loc 1 152 1 is_stmt 1 view -0
 167              		.cfi_startproc
 168              		@ args = 0, pretend = 0, frame = 0
 169              		@ frame_needed = 0, uses_anonymous_args = 0
 170              		@ link register save eliminated.
 153:Core/Src/motor.c ****     /* --- 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π --- */
 154:Core/Src/motor.c ****     CLEAR_BIT(TIM1->CR1, TIM_CR1_CEN);
 171              		.loc 1 154 5 view .LVU22
 172 0000 174B     		ldr	r3, .L11
 173 0002 1A68     		ldr	r2, [r3]
 174 0004 22F00102 		bic	r2, r2, #1
 175 0008 1A60     		str	r2, [r3]
 155:Core/Src/motor.c **** 
 156:Core/Src/motor.c ****     /* --- 2. –ó–∞–¥–∞—Ç—å –¥–µ–ª–∏—Ç–µ–ª—å (PSC) –∏ –ø–µ—Ä–∏–æ–¥ (ARR) --- */
 157:Core/Src/motor.c ****     WRITE_REG(TIM1->PSC, MOTOR_TIM1_PSC); /* –¥–µ–ª–∏—Ç–µ–ª—å: f_cnt = f_tim / (PSC+1) */
 176              		.loc 1 157 5 view .LVU23
 177 000a 5322     		movs	r2, #83
 178 000c 9A62     		str	r2, [r3, #40]
 158:Core/Src/motor.c ****     WRITE_REG(TIM1->ARR, MOTOR_TIM1_ARR); /* –ø–µ—Ä–∏–æ–¥: CNT —Å—á–∏—Ç–∞–µ—Ç –æ—Ç 0 –¥–æ ARR */
 179              		.loc 1 158 5 view .LVU24
 180 000e 6322     		movs	r2, #99
 181 0010 DA62     		str	r2, [r3, #44]
 159:Core/Src/motor.c **** 
 160:Core/Src/motor.c ****     /* --- 3. –ö–∞–Ω–∞–ª 1: PWM mode 1, preload ---
 161:Core/Src/motor.c ****      *
 162:Core/Src/motor.c ****      * CCMR1, –ø–æ–ª–µ –¥–ª—è CH1:
 163:Core/Src/motor.c ****      *   CC1S[1:0] = 00 -> –∫–∞–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤—ã—Ö–æ–¥
 164:Core/Src/motor.c ****      *   OC1M[2:0] = 110 -> PWM mode 1
 165:Core/Src/motor.c ****      *   OC1PE = 1      -> –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ CCR1 (CCR1 –≤ "—Ç–µ–Ω–µ–≤–æ–º" —Ä–µ–≥–∏—Å—Ç—Ä–µ
 166:Core/Src/motor.c ****      */
 167:Core/Src/motor.c ****     MODIFY_REG(TIM1->CCMR1,
 182              		.loc 1 167 5 view .LVU25
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 7


 183 0012 9A69     		ldr	r2, [r3, #24]
 184 0014 22F07B02 		bic	r2, r2, #123
 185 0018 42F06802 		orr	r2, r2, #104
 186 001c 9A61     		str	r2, [r3, #24]
 168:Core/Src/motor.c ****                TIM_CCMR1_CC1S_Msk |
 169:Core/Src/motor.c ****                    TIM_CCMR1_OC1M_Msk |
 170:Core/Src/motor.c ****                    TIM_CCMR1_OC1PE_Msk,
 171:Core/Src/motor.c ****                (0x0UL << TIM_CCMR1_CC1S_Pos) |     /* CC1S = 00: output */
 172:Core/Src/motor.c ****                    (0x6UL << TIM_CCMR1_OC1M_Pos) | /* OC1M = 110: PWM mode 1 */
 173:Core/Src/motor.c ****                    TIM_CCMR1_OC1PE);               /* –≤–∫–ª—é—á–∞–µ–º preload CCR1 */
 174:Core/Src/motor.c **** 
 175:Core/Src/motor.c ****     /* --- 4. –ö–∞–Ω–∞–ª 2: PWM mode 1, preload ---
 176:Core/Src/motor.c ****      *
 177:Core/Src/motor.c ****      * –î–ª—è CH2 —Ç–µ –∂–µ –ø–æ–ª—è, –Ω–æ CC2S, OC2M, OC2PE.
 178:Core/Src/motor.c ****      */
 179:Core/Src/motor.c ****     MODIFY_REG(TIM1->CCMR1,
 187              		.loc 1 179 5 view .LVU26
 188 001e 9A69     		ldr	r2, [r3, #24]
 189 0020 22F4F642 		bic	r2, r2, #31488
 190 0024 42F4D042 		orr	r2, r2, #26624
 191 0028 9A61     		str	r2, [r3, #24]
 180:Core/Src/motor.c ****                TIM_CCMR1_CC2S_Msk |
 181:Core/Src/motor.c ****                    TIM_CCMR1_OC2M_Msk |
 182:Core/Src/motor.c ****                    TIM_CCMR1_OC2PE_Msk,
 183:Core/Src/motor.c ****                (0x0UL << TIM_CCMR1_CC2S_Pos) |     /* CC2S = 00: output */
 184:Core/Src/motor.c ****                    (0x6UL << TIM_CCMR1_OC2M_Pos) | /* OC2M = 110: PWM mode 1 */
 185:Core/Src/motor.c ****                    TIM_CCMR1_OC2PE);               /* preload CCR2 */
 186:Core/Src/motor.c **** 
 187:Core/Src/motor.c ****     /* --- 5. CCER: –≤–∫–ª—é—á–∞–µ–º –≤—ã—Ö–æ–¥—ã CH1 –∏ CH2, –ø–æ–ª—è—Ä–Ω–æ—Å—Ç—å "–∞–∫—Ç–∏–≤–Ω—ã–
 188:Core/Src/motor.c ****      *
 189:Core/Src/motor.c ****      * CC1E = 1 -> –∫–∞–Ω–∞–ª 1 –≤–∫–ª—é—á—ë–Ω, —Å–∏–≥–Ω–∞–ª –∏–¥—ë—Ç –Ω–∞ –ø–∏–Ω PE9.
 190:Core/Src/motor.c ****      * CC1P = 0 -> –∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã—Å–æ–∫–∏–π (–ª–æ–≥–∏—á–µ—Å–∫–∞—è "1" = –≤—ã—Å–æ–∫–∏–π —É—Ä–
 191:Core/Src/motor.c ****      * –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ CC2E/CC2P –¥–ª—è –∫–∞–Ω–∞–ª–∞ 2 (PE11).
 192:Core/Src/motor.c ****      */
 193:Core/Src/motor.c ****     MODIFY_REG(TIM1->CCER,
 192              		.loc 1 193 5 view .LVU27
 193 002a 1A6A     		ldr	r2, [r3, #32]
 194 002c 22F03302 		bic	r2, r2, #51
 195 0030 42F01102 		orr	r2, r2, #17
 196 0034 1A62     		str	r2, [r3, #32]
 194:Core/Src/motor.c ****                TIM_CCER_CC1E_Msk | TIM_CCER_CC1P_Msk |
 195:Core/Src/motor.c ****                    TIM_CCER_CC2E_Msk | TIM_CCER_CC2P_Msk,
 196:Core/Src/motor.c ****                TIM_CCER_CC1E |     /* CH1 enable, polarity high */
 197:Core/Src/motor.c ****                    TIM_CCER_CC2E); /* CH2 enable, polarity high */
 198:Core/Src/motor.c **** 
 199:Core/Src/motor.c ****     /* --- 6. –ù–∞—á–∞–ª—å–Ω–∞—è —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å: 0% ---
 200:Core/Src/motor.c ****      * CNT –≤ –Ω–∞—á–∞–ª–µ –ø–µ—Ä–∏–æ–¥–∞ –≤—Å–µ–≥–¥–∞ < CCRx? –ù–µ—Ç, –º—ã –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ
 201:Core/Src/motor.c ****      * –∑–Ω–∞—á–∏—Ç "–≤—ã—Å–æ–∫–∏–π" —É—á–∞—Å—Ç–æ–∫ –±—É–¥–µ—Ç –Ω—É–ª–µ–≤–æ–π –¥–ª–∏–Ω—ã -> –º–æ—Ç–
 202:Core/Src/motor.c ****      */
 203:Core/Src/motor.c ****     WRITE_REG(TIM1->CCR1, 0U); /* PWM = 0% –¥–ª—è –º–æ—Ç–æ—Ä–∞ A */
 197              		.loc 1 203 5 view .LVU28
 198 0036 0022     		movs	r2, #0
 199 0038 5A63     		str	r2, [r3, #52]
 204:Core/Src/motor.c ****     WRITE_REG(TIM1->CCR2, 0U); /* PWM = 0% –¥–ª—è –º–æ—Ç–æ—Ä–∞ B */
 200              		.loc 1 204 5 view .LVU29
 201 003a 9A63     		str	r2, [r3, #56]
 205:Core/Src/motor.c **** 
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 8


 206:Core/Src/motor.c ****     /* --- 7. –†–∞–∑—Ä–µ—à–∞–µ–º –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é ARR (ARPE) ---
 207:Core/Src/motor.c ****      * –¢–µ–ø–µ—Ä—å ARR —Ç–æ–∂–µ –±—É—Ñ–µ—Ä–∏–∑—É–µ—Ç—Å—è, –∏ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Ä–≤—ë
 208:Core/Src/motor.c ****      */
 209:Core/Src/motor.c ****     SET_BIT(TIM1->CR1, TIM_CR1_ARPE);
 202              		.loc 1 209 5 view .LVU30
 203 003c 1A68     		ldr	r2, [r3]
 204 003e 42F08002 		orr	r2, r2, #128
 205 0042 1A60     		str	r2, [r3]
 210:Core/Src/motor.c **** 
 211:Core/Src/motor.c ****     /* --- 8. BDTR: –≤–∫–ª—é—á–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –≤—ã—Ö–æ–¥ (MOE) ---
 212:Core/Src/motor.c ****      *
 213:Core/Src/motor.c ****      * –î–ª—è advanced-timer (TIM1/TIM8) –í–°–ï PWM-–≤—ã—Ö–æ–¥—ã —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É—
 214:Core/Src/motor.c ****      * –ø–æ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–∏—Ç MOE (Main Output Enable).
 215:Core/Src/motor.c ****      * –ü–æ—ç—Ç–æ–º—É –±–µ–∑ —ç—Ç–æ–≥–æ —à–∞–≥–∞ CH1/CH2 –Ω–∞ –Ω–æ–≥–∞—Ö –Ω–µ –ø–æ—è–≤—è—Ç—Å—è.
 216:Core/Src/motor.c ****      */
 217:Core/Src/motor.c ****     SET_BIT(TIM1->BDTR, TIM_BDTR_MOE);
 206              		.loc 1 217 5 view .LVU31
 207 0044 5A6C     		ldr	r2, [r3, #68]
 208 0046 42F40042 		orr	r2, r2, #32768
 209 004a 5A64     		str	r2, [r3, #68]
 218:Core/Src/motor.c **** 
 219:Core/Src/motor.c ****     /* --- 9. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (EGR.UG) ---
 220:Core/Src/motor.c ****      *
 221:Core/Src/motor.c ****      * –≠—Ç–æ "–ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç" –∑–Ω–∞—á–µ–Ω–∏—è PSC, ARR, CCRx –∏–∑ —Ç–µ–Ω–µ–≤—ã—Ö —Ä–µ–≥
 222:Core/Src/motor.c ****      * –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç–∞–π–º–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –ø
 223:Core/Src/motor.c ****      */
 224:Core/Src/motor.c ****     SET_BIT(TIM1->EGR, TIM_EGR_UG);
 210              		.loc 1 224 5 view .LVU32
 211 004c 5A69     		ldr	r2, [r3, #20]
 212 004e 42F00102 		orr	r2, r2, #1
 213 0052 5A61     		str	r2, [r3, #20]
 225:Core/Src/motor.c **** 
 226:Core/Src/motor.c ****     /* --- 10. –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä (CR1.CEN = 1) --- */
 227:Core/Src/motor.c ****     SET_BIT(TIM1->CR1, TIM_CR1_CEN);
 214              		.loc 1 227 5 view .LVU33
 215 0054 1A68     		ldr	r2, [r3]
 216 0056 42F00102 		orr	r2, r2, #1
 217 005a 1A60     		str	r2, [r3]
 228:Core/Src/motor.c **** }
 218              		.loc 1 228 1 is_stmt 0 view .LVU34
 219 005c 7047     		bx	lr
 220              	.L12:
 221 005e 00BF     		.align	2
 222              	.L11:
 223 0060 00000140 		.word	1073807360
 224              		.cfi_endproc
 225              	.LFE133:
 227              		.section	.text.Motor_SetDir,"ax",%progbits
 228              		.align	1
 229              		.syntax unified
 230              		.thumb
 231              		.thumb_func
 233              	Motor_SetDir:
 234              	.LVL0:
 235              	.LFB134:
 229:Core/Src/motor.c **** 
 230:Core/Src/motor.c **** /* --- 5. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è: –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞ --- */
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 9


 231:Core/Src/motor.c **** /* dir > 0: –≤–ø–µ—Ä—ë–¥, dir < 0: –Ω–∞–∑–∞–¥, dir = 0: –æ–±–∞ INx = 0 (—Ç–æ—Ä–º–æ–∑) */
 232:Core/Src/motor.c **** static void Motor_SetDir(MotorId id, int8_t dir)
 233:Core/Src/motor.c **** {
 236              		.loc 1 233 1 is_stmt 1 view -0
 237              		.cfi_startproc
 238              		@ args = 0, pretend = 0, frame = 0
 239              		@ frame_needed = 0, uses_anonymous_args = 0
 240              		@ link register save eliminated.
 234:Core/Src/motor.c ****     switch (id)
 241              		.loc 1 234 5 view .LVU36
 242 0000 10B1     		cbz	r0, .L14
 243 0002 0128     		cmp	r0, #1
 244 0004 1ED0     		beq	.L15
 245 0006 7047     		bx	lr
 246              	.L14:
 235:Core/Src/motor.c ****     {
 236:Core/Src/motor.c ****     case MOTOR_A:
 237:Core/Src/motor.c ****         if (dir > 0)
 247              		.loc 1 237 9 view .LVU37
 248              		.loc 1 237 12 is_stmt 0 view .LVU38
 249 0008 0029     		cmp	r1, #0
 250 000a 09DD     		ble	.L17
 238:Core/Src/motor.c ****         {
 239:Core/Src/motor.c ****             /* –í–ø–µ—Ä—ë–¥: IN1=0 (PD11=0), IN2=1 (PD12=1) */
 240:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_11);
 251              		.loc 1 240 13 is_stmt 1 view .LVU39
 252 000c 1C4B     		ldr	r3, .L23
 253 000e 9A69     		ldr	r2, [r3, #24]
 254 0010 42F00062 		orr	r2, r2, #134217728
 255 0014 9A61     		str	r2, [r3, #24]
 241:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BS_12);
 256              		.loc 1 241 13 view .LVU40
 257 0016 9A69     		ldr	r2, [r3, #24]
 258 0018 42F48052 		orr	r2, r2, #4096
 259 001c 9A61     		str	r2, [r3, #24]
 260 001e 7047     		bx	lr
 261              	.L17:
 242:Core/Src/motor.c ****         }
 243:Core/Src/motor.c ****         else if (dir < 0)
 262              		.loc 1 243 14 view .LVU41
 263              		.loc 1 243 17 is_stmt 0 view .LVU42
 264 0020 0029     		cmp	r1, #0
 265 0022 05DB     		blt	.L21
 244:Core/Src/motor.c ****         {
 245:Core/Src/motor.c ****             /* –ù–∞–∑–∞–¥: IN1=1, IN2=0 */
 246:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BS_11);
 247:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_12);
 248:Core/Src/motor.c ****         }
 249:Core/Src/motor.c ****         else
 250:Core/Src/motor.c ****         {
 251:Core/Src/motor.c ****             /* –°—Ç–æ–ø (—Ç–æ—Ä–º–æ–∑): IN1=0, IN2=0 */
 252:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_11 | GPIO_BSRR_BR_12);
 266              		.loc 1 252 13 is_stmt 1 view .LVU43
 267 0024 164A     		ldr	r2, .L23
 268 0026 9369     		ldr	r3, [r2, #24]
 269 0028 43F0C053 		orr	r3, r3, #402653184
 270 002c 9361     		str	r3, [r2, #24]
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 10


 271 002e 7047     		bx	lr
 272              	.L21:
 246:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_12);
 273              		.loc 1 246 13 view .LVU44
 274 0030 134B     		ldr	r3, .L23
 275 0032 9A69     		ldr	r2, [r3, #24]
 276 0034 42F40062 		orr	r2, r2, #2048
 277 0038 9A61     		str	r2, [r3, #24]
 247:Core/Src/motor.c ****         }
 278              		.loc 1 247 13 view .LVU45
 279 003a 9A69     		ldr	r2, [r3, #24]
 280 003c 42F08052 		orr	r2, r2, #268435456
 281 0040 9A61     		str	r2, [r3, #24]
 282 0042 7047     		bx	lr
 283              	.L15:
 253:Core/Src/motor.c ****         }
 254:Core/Src/motor.c ****         break;
 255:Core/Src/motor.c **** 
 256:Core/Src/motor.c ****     case MOTOR_B:
 257:Core/Src/motor.c ****         if (dir > 0)
 284              		.loc 1 257 9 view .LVU46
 285              		.loc 1 257 12 is_stmt 0 view .LVU47
 286 0044 0029     		cmp	r1, #0
 287 0046 09DD     		ble	.L19
 258:Core/Src/motor.c ****         {
 259:Core/Src/motor.c ****             /* –í–ø–µ—Ä—ë–¥: IN3=0 (PD13=0), IN4=1 (PD14=1) */
 260:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_13);
 288              		.loc 1 260 13 is_stmt 1 view .LVU48
 289 0048 0D4B     		ldr	r3, .L23
 290 004a 9A69     		ldr	r2, [r3, #24]
 291 004c 42F00052 		orr	r2, r2, #536870912
 292 0050 9A61     		str	r2, [r3, #24]
 261:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BS_14);
 293              		.loc 1 261 13 view .LVU49
 294 0052 9A69     		ldr	r2, [r3, #24]
 295 0054 42F48042 		orr	r2, r2, #16384
 296 0058 9A61     		str	r2, [r3, #24]
 297 005a 7047     		bx	lr
 298              	.L19:
 262:Core/Src/motor.c ****         }
 263:Core/Src/motor.c ****         else if (dir < 0)
 299              		.loc 1 263 14 view .LVU50
 300              		.loc 1 263 17 is_stmt 0 view .LVU51
 301 005c 0029     		cmp	r1, #0
 302 005e 05DB     		blt	.L22
 264:Core/Src/motor.c ****         {
 265:Core/Src/motor.c ****             /* –ù–∞–∑–∞–¥: IN3=1, IN4=0 */
 266:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BS_13);
 267:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_14);
 268:Core/Src/motor.c ****         }
 269:Core/Src/motor.c ****         else
 270:Core/Src/motor.c ****         {
 271:Core/Src/motor.c ****             /* –°—Ç–æ–ø: IN3=0, IN4=0 */
 272:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_13 | GPIO_BSRR_BR_14);
 303              		.loc 1 272 13 is_stmt 1 view .LVU52
 304 0060 074A     		ldr	r2, .L23
 305 0062 9369     		ldr	r3, [r2, #24]
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 11


 306 0064 43F0C043 		orr	r3, r3, #1610612736
 307 0068 9361     		str	r3, [r2, #24]
 273:Core/Src/motor.c ****         }
 274:Core/Src/motor.c ****         break;
 275:Core/Src/motor.c **** 
 276:Core/Src/motor.c ****     default:
 277:Core/Src/motor.c ****         /* –ù–µ–≤–µ—Ä–Ω—ã–π id ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º */
 278:Core/Src/motor.c ****         break;
 279:Core/Src/motor.c ****     }
 280:Core/Src/motor.c **** }
 308              		.loc 1 280 1 is_stmt 0 view .LVU53
 309 006a 7047     		bx	lr
 310              	.L22:
 266:Core/Src/motor.c ****             SET_BIT(GPIOD->BSRR, GPIO_BSRR_BR_14);
 311              		.loc 1 266 13 is_stmt 1 view .LVU54
 312 006c 044B     		ldr	r3, .L23
 313 006e 9A69     		ldr	r2, [r3, #24]
 314 0070 42F40052 		orr	r2, r2, #8192
 315 0074 9A61     		str	r2, [r3, #24]
 267:Core/Src/motor.c ****         }
 316              		.loc 1 267 13 view .LVU55
 317 0076 9A69     		ldr	r2, [r3, #24]
 318 0078 42F08042 		orr	r2, r2, #1073741824
 319 007c 9A61     		str	r2, [r3, #24]
 320 007e 7047     		bx	lr
 321              	.L24:
 322              		.align	2
 323              	.L23:
 324 0080 000C0240 		.word	1073875968
 325              		.cfi_endproc
 326              	.LFE134:
 328              		.section	.text.Motor_SetPwm,"ax",%progbits
 329              		.align	1
 330              		.syntax unified
 331              		.thumb
 332              		.thumb_func
 334              	Motor_SetPwm:
 335              	.LVL1:
 336              	.LFB135:
 281:Core/Src/motor.c **** 
 282:Core/Src/motor.c **** /* --- 6. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–≤–∞–∂–Ω–æ—Å—Ç–∏ (CCR) --- */
 283:Core/Src/motor.c **** /* value: 0..MOTOR_PWM_MAX */
 284:Core/Src/motor.c **** static void Motor_SetPwm(MotorId id, uint16_t value)
 285:Core/Src/motor.c **** {
 337              		.loc 1 285 1 view -0
 338              		.cfi_startproc
 339              		@ args = 0, pretend = 0, frame = 0
 340              		@ frame_needed = 0, uses_anonymous_args = 0
 341              		@ link register save eliminated.
 286:Core/Src/motor.c ****     if (value > MOTOR_PWM_MAX)
 342              		.loc 1 286 5 view .LVU57
 343              		.loc 1 286 8 is_stmt 0 view .LVU58
 344 0000 6329     		cmp	r1, #99
 345 0002 00D9     		bls	.L26
 287:Core/Src/motor.c ****     {
 288:Core/Src/motor.c ****         value = MOTOR_PWM_MAX;
 346              		.loc 1 288 15 view .LVU59
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 12


 347 0004 6321     		movs	r1, #99
 348              	.LVL2:
 349              	.L26:
 289:Core/Src/motor.c ****     }
 290:Core/Src/motor.c **** 
 291:Core/Src/motor.c ****     if (id == MOTOR_A)
 350              		.loc 1 291 5 is_stmt 1 view .LVU60
 351              		.loc 1 291 8 is_stmt 0 view .LVU61
 352 0006 10B9     		cbnz	r0, .L27
 292:Core/Src/motor.c ****     {
 293:Core/Src/motor.c ****         WRITE_REG(TIM1->CCR1, value);
 353              		.loc 1 293 9 is_stmt 1 view .LVU62
 354 0008 044B     		ldr	r3, .L31
 355 000a 5963     		str	r1, [r3, #52]
 356 000c 7047     		bx	lr
 357              	.L27:
 294:Core/Src/motor.c ****     }
 295:Core/Src/motor.c ****     else if (id == MOTOR_B)
 358              		.loc 1 295 10 view .LVU63
 359              		.loc 1 295 13 is_stmt 0 view .LVU64
 360 000e 0128     		cmp	r0, #1
 361 0010 00D0     		beq	.L30
 362              	.L25:
 296:Core/Src/motor.c ****     {
 297:Core/Src/motor.c ****         WRITE_REG(TIM1->CCR2, value);
 298:Core/Src/motor.c ****     }
 299:Core/Src/motor.c **** }
 363              		.loc 1 299 1 view .LVU65
 364 0012 7047     		bx	lr
 365              	.L30:
 297:Core/Src/motor.c ****     }
 366              		.loc 1 297 9 is_stmt 1 view .LVU66
 367 0014 014B     		ldr	r3, .L31
 368 0016 9963     		str	r1, [r3, #56]
 369              		.loc 1 299 1 is_stmt 0 view .LVU67
 370 0018 FBE7     		b	.L25
 371              	.L32:
 372 001a 00BF     		.align	2
 373              	.L31:
 374 001c 00000140 		.word	1073807360
 375              		.cfi_endproc
 376              	.LFE135:
 378              		.section	.text.Motor_SetSpeed,"ax",%progbits
 379              		.align	1
 380              		.global	Motor_SetSpeed
 381              		.syntax unified
 382              		.thumb
 383              		.thumb_func
 385              	Motor_SetSpeed:
 386              	.LVL3:
 387              	.LFB137:
 300:Core/Src/motor.c **** 
 301:Core/Src/motor.c **** /* --- 7. –ü—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ --- */
 302:Core/Src/motor.c **** 
 303:Core/Src/motor.c **** void Motor_Init(void)
 304:Core/Src/motor.c **** {
 305:Core/Src/motor.c ****     Motor_ClockInit();
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 13


 306:Core/Src/motor.c ****     Motor_GPIO_DirPins_Init();
 307:Core/Src/motor.c ****     Motor_GPIO_PwmPins_Init();
 308:Core/Src/motor.c ****     Motor_TIM1_Init();
 309:Core/Src/motor.c **** 
 310:Core/Src/motor.c ****     /* –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –µ—â—ë —Ä–∞–∑ —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –º–æ—Ç–æ—Ä—ã —Å—Ç–æ—è—
 311:Core/Src/motor.c ****     Motor_SetSpeed(MOTOR_A, 0);
 312:Core/Src/motor.c ****     Motor_SetSpeed(MOTOR_B, 0);
 313:Core/Src/motor.c **** }
 314:Core/Src/motor.c **** 
 315:Core/Src/motor.c **** void Motor_SetSpeed(MotorId id, int16_t speed)
 316:Core/Src/motor.c **** {
 388              		.loc 1 316 1 is_stmt 1 view -0
 389              		.cfi_startproc
 390              		@ args = 0, pretend = 0, frame = 0
 391              		@ frame_needed = 0, uses_anonymous_args = 0
 317:Core/Src/motor.c ****     if (id != MOTOR_A && id != MOTOR_B)
 392              		.loc 1 317 5 view .LVU69
 393              		.loc 1 317 8 is_stmt 0 view .LVU70
 394 0000 0128     		cmp	r0, #1
 395 0002 1ED8     		bhi	.L41
 316:Core/Src/motor.c ****     if (id != MOTOR_A && id != MOTOR_B)
 396              		.loc 1 316 1 view .LVU71
 397 0004 38B5     		push	{r3, r4, r5, lr}
 398              	.LCFI0:
 399              		.cfi_def_cfa_offset 16
 400              		.cfi_offset 3, -16
 401              		.cfi_offset 4, -12
 402              		.cfi_offset 5, -8
 403              		.cfi_offset 14, -4
 404 0006 0546     		mov	r5, r0
 318:Core/Src/motor.c ****     {
 319:Core/Src/motor.c ****         return;
 320:Core/Src/motor.c ****     }
 321:Core/Src/motor.c **** 
 322:Core/Src/motor.c ****     if (speed == 0)
 405              		.loc 1 322 5 is_stmt 1 view .LVU72
 406              		.loc 1 322 8 is_stmt 0 view .LVU73
 407 0008 71B1     		cbz	r1, .L44
 323:Core/Src/motor.c ****     {
 324:Core/Src/motor.c ****         /* –ü–æ–ª–Ω—ã–π —Å—Ç–æ–ø: PWM=0 –∏ "—Ç–æ—Ä–º–æ–∑" –ø–æ INx */
 325:Core/Src/motor.c ****         Motor_SetPwm(id, 0);
 326:Core/Src/motor.c ****         Motor_SetDir(id, 0);
 327:Core/Src/motor.c ****         return;
 328:Core/Src/motor.c ****     }
 329:Core/Src/motor.c **** 
 330:Core/Src/motor.c ****     int8_t dir;
 408              		.loc 1 330 5 is_stmt 1 view .LVU74
 331:Core/Src/motor.c ****     uint16_t mag;
 409              		.loc 1 331 5 view .LVU75
 332:Core/Src/motor.c **** 
 333:Core/Src/motor.c ****     if (speed > 0)
 410              		.loc 1 333 5 view .LVU76
 411              		.loc 1 333 8 is_stmt 0 view .LVU77
 412 000a 0029     		cmp	r1, #0
 413 000c 13DD     		ble	.L36
 334:Core/Src/motor.c ****     {
 335:Core/Src/motor.c ****         dir = +1;
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 14


 414              		.loc 1 335 9 is_stmt 1 view .LVU78
 415              	.LVL4:
 336:Core/Src/motor.c ****         mag = (uint16_t)speed;
 416              		.loc 1 336 9 view .LVU79
 417              		.loc 1 336 13 is_stmt 0 view .LVU80
 418 000e 8CB2     		uxth	r4, r1
 419              	.LVL5:
 335:Core/Src/motor.c ****         mag = (uint16_t)speed;
 420              		.loc 1 335 13 view .LVU81
 421 0010 0121     		movs	r1, #1
 422              	.LVL6:
 423              	.L37:
 337:Core/Src/motor.c ****     }
 338:Core/Src/motor.c ****     else
 339:Core/Src/motor.c ****     {
 340:Core/Src/motor.c ****         dir = -1;
 341:Core/Src/motor.c ****         mag = (uint16_t)(-speed);
 342:Core/Src/motor.c ****     }
 343:Core/Src/motor.c **** 
 344:Core/Src/motor.c ****     if (mag > MOTOR_PWM_MAX)
 424              		.loc 1 344 5 is_stmt 1 view .LVU82
 425              		.loc 1 344 8 is_stmt 0 view .LVU83
 426 0012 632C     		cmp	r4, #99
 427 0014 00D9     		bls	.L38
 345:Core/Src/motor.c ****     {
 346:Core/Src/motor.c ****         mag = MOTOR_PWM_MAX;
 428              		.loc 1 346 13 view .LVU84
 429 0016 6324     		movs	r4, #99
 430              	.LVL7:
 431              	.L38:
 347:Core/Src/motor.c ****     }
 348:Core/Src/motor.c **** 
 349:Core/Src/motor.c ****     Motor_SetDir(id, dir);
 432              		.loc 1 349 5 is_stmt 1 view .LVU85
 433 0018 2846     		mov	r0, r5
 434              	.LVL8:
 435              		.loc 1 349 5 is_stmt 0 view .LVU86
 436 001a FFF7FEFF 		bl	Motor_SetDir
 437              	.LVL9:
 350:Core/Src/motor.c ****     Motor_SetPwm(id, mag);
 438              		.loc 1 350 5 is_stmt 1 view .LVU87
 439 001e 2146     		mov	r1, r4
 440 0020 2846     		mov	r0, r5
 441 0022 FFF7FEFF 		bl	Motor_SetPwm
 442              	.LVL10:
 443              	.L33:
 351:Core/Src/motor.c **** }
 444              		.loc 1 351 1 is_stmt 0 view .LVU88
 445 0026 38BD     		pop	{r3, r4, r5, pc}
 446              	.LVL11:
 447              	.L44:
 325:Core/Src/motor.c ****         Motor_SetDir(id, 0);
 448              		.loc 1 325 9 is_stmt 1 view .LVU89
 449 0028 FFF7FEFF 		bl	Motor_SetPwm
 450              	.LVL12:
 326:Core/Src/motor.c ****         return;
 451              		.loc 1 326 9 view .LVU90
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 15


 452 002c 0021     		movs	r1, #0
 453 002e 2846     		mov	r0, r5
 454 0030 FFF7FEFF 		bl	Motor_SetDir
 455              	.LVL13:
 327:Core/Src/motor.c ****     }
 456              		.loc 1 327 9 view .LVU91
 457 0034 F7E7     		b	.L33
 458              	.LVL14:
 459              	.L36:
 340:Core/Src/motor.c ****         mag = (uint16_t)(-speed);
 460              		.loc 1 340 9 view .LVU92
 341:Core/Src/motor.c ****     }
 461              		.loc 1 341 9 view .LVU93
 341:Core/Src/motor.c ****     }
 462              		.loc 1 341 15 is_stmt 0 view .LVU94
 463 0036 89B2     		uxth	r1, r1
 341:Core/Src/motor.c ****     }
 464              		.loc 1 341 13 view .LVU95
 465 0038 4942     		rsbs	r1, r1, #0
 466              	.LVL15:
 341:Core/Src/motor.c ****     }
 467              		.loc 1 341 13 view .LVU96
 468 003a 8CB2     		uxth	r4, r1
 469              	.LVL16:
 340:Core/Src/motor.c ****         mag = (uint16_t)(-speed);
 470              		.loc 1 340 13 view .LVU97
 471 003c 4FF0FF31 		mov	r1, #-1
 472              	.LVL17:
 340:Core/Src/motor.c ****         mag = (uint16_t)(-speed);
 473              		.loc 1 340 13 view .LVU98
 474 0040 E7E7     		b	.L37
 475              	.LVL18:
 476              	.L41:
 477              	.LCFI1:
 478              		.cfi_def_cfa_offset 0
 479              		.cfi_restore 3
 480              		.cfi_restore 4
 481              		.cfi_restore 5
 482              		.cfi_restore 14
 340:Core/Src/motor.c ****         mag = (uint16_t)(-speed);
 483              		.loc 1 340 13 view .LVU99
 484 0042 7047     		bx	lr
 485              		.cfi_endproc
 486              	.LFE137:
 488              		.section	.text.Motor_Init,"ax",%progbits
 489              		.align	1
 490              		.global	Motor_Init
 491              		.syntax unified
 492              		.thumb
 493              		.thumb_func
 495              	Motor_Init:
 496              	.LFB136:
 304:Core/Src/motor.c ****     Motor_ClockInit();
 497              		.loc 1 304 1 is_stmt 1 view -0
 498              		.cfi_startproc
 499              		@ args = 0, pretend = 0, frame = 0
 500              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 16


 501 0000 08B5     		push	{r3, lr}
 502              	.LCFI2:
 503              		.cfi_def_cfa_offset 8
 504              		.cfi_offset 3, -8
 505              		.cfi_offset 14, -4
 305:Core/Src/motor.c ****     Motor_GPIO_DirPins_Init();
 506              		.loc 1 305 5 view .LVU101
 507 0002 FFF7FEFF 		bl	Motor_ClockInit
 508              	.LVL19:
 306:Core/Src/motor.c ****     Motor_GPIO_PwmPins_Init();
 509              		.loc 1 306 5 view .LVU102
 510 0006 FFF7FEFF 		bl	Motor_GPIO_DirPins_Init
 511              	.LVL20:
 307:Core/Src/motor.c ****     Motor_TIM1_Init();
 512              		.loc 1 307 5 view .LVU103
 513 000a FFF7FEFF 		bl	Motor_GPIO_PwmPins_Init
 514              	.LVL21:
 308:Core/Src/motor.c **** 
 515              		.loc 1 308 5 view .LVU104
 516 000e FFF7FEFF 		bl	Motor_TIM1_Init
 517              	.LVL22:
 311:Core/Src/motor.c ****     Motor_SetSpeed(MOTOR_B, 0);
 518              		.loc 1 311 5 view .LVU105
 519 0012 0021     		movs	r1, #0
 520 0014 0846     		mov	r0, r1
 521 0016 FFF7FEFF 		bl	Motor_SetSpeed
 522              	.LVL23:
 312:Core/Src/motor.c **** }
 523              		.loc 1 312 5 view .LVU106
 524 001a 0021     		movs	r1, #0
 525 001c 0120     		movs	r0, #1
 526 001e FFF7FEFF 		bl	Motor_SetSpeed
 527              	.LVL24:
 313:Core/Src/motor.c **** 
 528              		.loc 1 313 1 is_stmt 0 view .LVU107
 529 0022 08BD     		pop	{r3, pc}
 530              		.cfi_endproc
 531              	.LFE136:
 533              		.section	.text.Motor_Stop,"ax",%progbits
 534              		.align	1
 535              		.global	Motor_Stop
 536              		.syntax unified
 537              		.thumb
 538              		.thumb_func
 540              	Motor_Stop:
 541              	.LVL25:
 542              	.LFB138:
 352:Core/Src/motor.c **** 
 353:Core/Src/motor.c **** void Motor_Stop(MotorId id)
 354:Core/Src/motor.c **** {
 543              		.loc 1 354 1 is_stmt 1 view -0
 544              		.cfi_startproc
 545              		@ args = 0, pretend = 0, frame = 0
 546              		@ frame_needed = 0, uses_anonymous_args = 0
 547              		.loc 1 354 1 is_stmt 0 view .LVU109
 548 0000 08B5     		push	{r3, lr}
 549              	.LCFI3:
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 17


 550              		.cfi_def_cfa_offset 8
 551              		.cfi_offset 3, -8
 552              		.cfi_offset 14, -4
 355:Core/Src/motor.c ****     Motor_SetSpeed(id, 0);
 553              		.loc 1 355 5 is_stmt 1 view .LVU110
 554 0002 0021     		movs	r1, #0
 555 0004 FFF7FEFF 		bl	Motor_SetSpeed
 556              	.LVL26:
 356:Core/Src/motor.c **** }...
 557              		.loc 1 356 1 is_stmt 0 view .LVU111
 558 0008 08BD     		pop	{r3, pc}
 559              		.cfi_endproc
 560              	.LFE138:
 562              		.text
 563              	.Letext0:
 564              		.file 2 "C:/Users/user/Desktop/Tools/xpack-arm-none-eabi-gcc-13.2.1-1.1/arm-none-eabi/include/mach
 565              		.file 3 "C:/Users/user/Desktop/Tools/xpack-arm-none-eabi-gcc-13.2.1-1.1/arm-none-eabi/include/sys/
 566              		.file 4 "Core/Inc/../../CMSIS/Devices/STM32F4xx/Inc/STM32F429ZI/stm32f429xx.h"
 567              		.file 5 "Core/Inc/motor.h"
ARM GAS  C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 motor.c
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:21     .text.Motor_ClockInit:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:26     .text.Motor_ClockInit:00000000 Motor_ClockInit
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:51     .text.Motor_ClockInit:0000001c $d
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:56     .text.Motor_GPIO_DirPins_Init:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:61     .text.Motor_GPIO_DirPins_Init:00000000 Motor_GPIO_DirPins_Init
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:100    .text.Motor_GPIO_DirPins_Init:0000003c $d
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:106    .text.Motor_GPIO_PwmPins_Init:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:111    .text.Motor_GPIO_PwmPins_Init:00000000 Motor_GPIO_PwmPins_Init
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:153    .text.Motor_GPIO_PwmPins_Init:00000048 $d
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:159    .text.Motor_TIM1_Init:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:164    .text.Motor_TIM1_Init:00000000 Motor_TIM1_Init
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:223    .text.Motor_TIM1_Init:00000060 $d
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:228    .text.Motor_SetDir:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:233    .text.Motor_SetDir:00000000 Motor_SetDir
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:324    .text.Motor_SetDir:00000080 $d
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:329    .text.Motor_SetPwm:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:334    .text.Motor_SetPwm:00000000 Motor_SetPwm
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:374    .text.Motor_SetPwm:0000001c $d
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:379    .text.Motor_SetSpeed:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:385    .text.Motor_SetSpeed:00000000 Motor_SetSpeed
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:489    .text.Motor_Init:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:495    .text.Motor_Init:00000000 Motor_Init
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:534    .text.Motor_Stop:00000000 $t
C:\Users\user\AppData\Local\Temp\ccp8Kr0q.s:540    .text.Motor_Stop:00000000 Motor_Stop

NO UNDEFINED SYMBOLS
